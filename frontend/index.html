<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Equity Analyst</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <div class="header-inner">
    <span class="logo">Equity <span>Analyst</span></span>
    <form id="search-form">
      <input id="ticker-input" type="text" placeholder="e.g. AAPL"
             autocomplete="off" spellcheck="false" maxlength="10" />
      <button type="submit" id="analyze-btn">Analyze &#8594;</button>
    </form>
  </div>
</header>

<main>

  <!-- Empty state -->
  <div id="empty-state">
    <div class="hero-icon">&#128202;</div>
    <h2>AI-Powered Equity Analysis</h2>
    <p>Enter a ticker above to pull the latest 10-K filing and earnings transcript,
       calculate a DCF intrinsic value, and generate a structured bull/bear analysis.</p>
  </div>

  <!-- Loading -->
  <div id="loading" hidden>
    <div class="spinner"></div>
    <p>Fetching filings and running analysis&hellip;</p>
    <p class="sub">This may take 20&ndash;40 seconds.</p>
  </div>

  <!-- Error -->
  <div id="error-state" hidden>
    <strong>Analysis failed</strong>
    <p id="error-msg"></p>
  </div>

  <!-- Results -->
  <div id="results" hidden>

    <!-- Meta bar -->
    <div class="meta-bar" id="meta-bar"></div>

    <!-- Price comparison widget -->
    <div class="price-widget" id="price-widget"></div>

    <!-- Tab bar -->
    <div class="tab-bar">
      <button class="tab-btn active" data-tab="analysis">Analysis</button>
      <button class="tab-btn" data-tab="dcf">DCF Model</button>
    </div>

    <!-- ── Analysis tab ── -->
    <div id="tab-analysis">
      <div class="two-col">
        <div class="card bull">
          <div class="card-header">
            <div class="card-icon">&#9650;</div>
            <span class="card-title">Bull Case</span>
          </div>
          <ol id="bull-list"></ol>
        </div>
        <div class="card bear">
          <div class="card-header">
            <div class="card-icon">&#9660;</div>
            <span class="card-title">Bear Case</span>
          </div>
          <ol id="bear-list"></ol>
        </div>
      </div>

      <div class="card risks">
        <div class="card-header">
          <div class="card-icon">&#9888;</div>
          <span class="card-title">Downplayed Risks</span>
        </div>
        <ol id="risks-list"></ol>
      </div>

      <div class="card summary">
        <div class="card-header">
          <span class="card-title">Analyst Summary</span>
        </div>
        <p id="summary-text"></p>
      </div>
    </div><!-- /tab-analysis -->

    <!-- ── DCF Model tab ── -->
    <div id="tab-dcf" hidden>

      <div id="dcf-unavailable" class="dcf-unavailable" hidden>
        <p>DCF data unavailable</p>
        <p>Financial statement data could not be retrieved for this ticker.<br>
           The analysis above is based on SEC filings and earnings transcripts only.</p>
      </div>

      <div id="dcf-content">
        <div id="dcf-warning" class="dcf-warning" hidden></div>

        <p class="dcf-section-label">Assumptions</p>
        <div class="assumptions-grid" id="dcf-assumptions"></div>

        <p class="dcf-section-label">Cost of Capital</p>
        <div class="wacc-grid" id="dcf-wacc"></div>

        <p class="dcf-section-label">Projected Free Cash Flows</p>
        <div class="table-card">
          <table class="dcf-table">
            <thead>
              <tr>
                <th>Year</th>
                <th>Projected FCF</th>
                <th>Present Value</th>
              </tr>
            </thead>
            <tbody id="dcf-table-body"></tbody>
          </table>
        </div>

        <p class="dcf-section-label">Valuation Bridge</p>
        <div class="bridge-card" id="dcf-bridge"></div>
      </div>

    </div><!-- /tab-dcf -->

  </div><!-- /results -->

</main>

<script src="js/api.js"></script>
<script src="js/analysis.js"></script>
<script src="js/dcf.js"></script>
<script src="js/app.js"></script>
</body>
</html>
